<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Highscores - Coding Quiz</title>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>

<body>
    <!-- Main section: title, list & buttons -->
    <main>
        <div class="content">
            <section class="highscores">
                <h2>Highscores</h2>
                <ol></ol>
                <button id="back">Go back</button>
                <button id="clear">Clear Highscores</button>
            </section>
        </div>
    </main>
    <script>
        // Initialise the selectors
        var list = document.querySelector("ol");
        var back = document.querySelector("#back");
        var clear = document.querySelector("#clear");
        // Fetch the scores from the local storage and list them in the document
        var viewHighscores = function () {
            var scores = JSON.parse(localStorage.getItem("scores"));
            console.log(scores);
            list.innerHTML = "";
            if (scores) {
                for (let i = 0; i < scores.length; i++) {
                    var listItem = document.createElement("li");
                    listItem.textContent = scores[i].initials + " - " + scores[i].score;
                    list.appendChild(listItem);
                }
            }
        }
        // On clicking back button go back to index page
        var goBack = back.addEventListener("click", function (e) {
            e.preventDefault();
            location.href = "./index.html";
        });
        // On clicking clear button remove the scores from the local storage
        var clearScores = clear.addEventListener("click", function (e) {
            e.preventDefault();
            localStorage.removeItem("scores");
            viewHighscores();
        });
        viewHighscores();
    </script>
</body>

</html>